import{r as q,j as S,L as tt}from"./index-BHtoyfOL.js";import{i as fn,r as Bn,c as X,l as Hn,f as hn,g as Un,h as qn,j as Jn,k as Ln,m as Kt,n as Xn,d as Wt,s as yt,a as zn}from"./linear-D8wwPlEk.js";class Zt extends Map{constructor(n,e=Wn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Qt(this,n))}has(n){return super.has(Qt(this,n))}set(n,e){return super.set(Gn(this,n),e)}delete(n){return super.delete(Kn(this,n))}}function Qt({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Gn({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Kn({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Wn(t){return t!==null&&typeof t=="object"?t.valueOf():t}const jt=Symbol("implicit");function Ht(){var t=new Zt,n=[],e=[],r=jt;function i(o){let a=t.get(o);if(a===void 0){if(r!==jt)return r;t.set(o,a=n.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new Zt;for(const a of o)t.has(a)||t.set(a,n.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ht(n,e).unknown(r)},fn.apply(i,arguments),i}function pn(){var t=Ht().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,o,a,s=!1,l=0,u=0,c=.5;delete t.unknown;function h(){var f=n().length,p=i<r,d=p?i:r,g=p?r:i;o=(g-d)/Math.max(1,f-l+u*2),s&&(o=Math.floor(o)),d+=(g-d-o*(f-l))*c,a=o*(1-l),s&&(d=Math.round(d),a=Math.round(a));var M=Bn(f).map(function(v){return d+o*v});return e(p?M.reverse():M)}return t.domain=function(f){return arguments.length?(n(f),h()):n()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(f){return arguments.length?(s=!!f,h()):s},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return pn(n(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},fn.apply(h(),arguments)}var tn=180/Math.PI,Ct={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dn(t,n,e,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,l/=s),t*r<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*tn,skewX:Math.atan(l)*tn,scaleX:a,scaleY:s}}var ht;function Zn(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Ct:dn(n.a,n.b,n.c,n.d,n.e,n.f)}function Qn(t){return t==null||(ht||(ht=document.createElementNS("http://www.w3.org/2000/svg","g")),ht.setAttribute("transform",t),!(t=ht.transform.baseVal.consolidate()))?Ct:(t=t.matrix,dn(t.a,t.b,t.c,t.d,t.e,t.f))}function gn(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,h,f,p,d){if(u!==h||c!==f){var g=p.push("translate(",null,n,null,e);d.push({i:g-4,x:X(u,h)},{i:g-2,x:X(c,f)})}else(h||f)&&p.push("translate("+h+n+f+e)}function a(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:X(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function s(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:X(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,p,d){if(u!==h||c!==f){var g=p.push(i(p)+"scale(",null,",",null,")");d.push({i:g-4,x:X(u,h)},{i:g-2,x:X(c,f)})}else(h!==1||f!==1)&&p.push(i(p)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,f),a(u.rotate,c.rotate,h,f),s(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(p){for(var d=-1,g=f.length,M;++d<g;)h[(M=f[d]).i]=M.x(p);return h.join("")}}}var jn=gn(Zn,"px, ","px)","deg)"),te=gn(Qn,", ",")",")");function ne(){var t=0,n=1,e,r,i,o,a=hn,s=!1,l;function u(h){return h==null||isNaN(h=+h)?l:a(i===0?.5:(h=(o(h)-e)*i,s?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,n]=h,e=o(t=+t),r=o(n=+n),i=e===r?0:1/(r-e),u):[t,n]},u.clamp=function(h){return arguments.length?(s=!!h,u):s},u.interpolator=function(h){return arguments.length?(a=h,u):a};function c(h){return function(f){var p,d;return arguments.length?([p,d]=f,a=h(p,d),u):[a(0),a(1)]}}return u.range=c(qn),u.rangeRound=c(Jn),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return o=h,e=h(t),r=h(n),i=e===r?0:1/(r-e),u}}function ee(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _n(){var t=Hn(ne()(hn));return t.copy=function(){return ee(t,_n())},Un.apply(t,arguments)}function vn(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const re=vn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ie=t=>Ln(t[t.length-1]);var oe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(vn);const ae=ie(oe);var se={value:()=>{}};function yn(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new dt(e)}function dt(t){this._=t}function ue(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}dt.prototype=yn.prototype={constructor:dt,on:function(t,n){var e=this._,r=ue(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ce(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=nn(e[i],t.name,n);else if(n==null)for(i in e)e[i]=nn(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new dt(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function ce(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function nn(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=se,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var It="http://www.w3.org/1999/xhtml";const en={svg:"http://www.w3.org/2000/svg",xhtml:It,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),en.hasOwnProperty(n)?{space:en[n],local:t}:t}function le(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===It&&n.documentElement.namespaceURI===It?n.createElement(t):n.createElementNS(e,t)}}function fe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mn(t){var n=Ot(t);return(n.local?fe:le)(n)}function he(){}function Ut(t){return t==null?he:function(){return this.querySelector(t)}}function pe(t){typeof t!="function"&&(t=Ut(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new I(r,this._parents)}function de(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ge(){return[]}function wn(t){return t==null?ge:function(){return this.querySelectorAll(t)}}function _e(t){return function(){return de(t.apply(this,arguments))}}function ve(t){typeof t=="function"?t=_e(t):t=wn(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new I(r,i)}function An(t){return function(){return this.matches(t)}}function xn(t){return function(n){return n.matches(t)}}var ye=Array.prototype.find;function me(t){return function(){return ye.call(this.children,t)}}function we(){return this.firstElementChild}function Ae(t){return this.select(t==null?we:me(typeof t=="function"?t:xn(t)))}var xe=Array.prototype.filter;function Me(){return Array.from(this.children)}function Oe(t){return function(){return xe.call(this.children,t)}}function Ne(t){return this.selectAll(t==null?Me:Oe(typeof t=="function"?t:xn(t)))}function Se(t){typeof t!="function"&&(t=An(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new I(r,this._parents)}function Mn(t){return new Array(t.length)}function Te(){return new I(this._enter||this._groups.map(Mn),this._parents)}function mt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}mt.prototype={constructor:mt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $e(t){return function(){return t}}function Ee(t,n,e,r,i,o){for(var a=0,s,l=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new mt(t,o[a]);for(;a<l;++a)(s=n[a])&&(i[a]=s)}function be(t,n,e,r,i,o,a){var s,l,u=new Map,c=n.length,h=o.length,f=new Array(c),p;for(s=0;s<c;++s)(l=n[s])&&(f[s]=p=a.call(l,l.__data__,s,n)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<h;++s)p=a.call(t,o[s],s,o)+"",(l=u.get(p))?(r[s]=l,l.__data__=o[s],u.delete(p)):e[s]=new mt(t,o[s]);for(s=0;s<c;++s)(l=n[s])&&u.get(f[s])===l&&(i[s]=l)}function Pe(t){return t.__data__}function ke(t,n){if(!arguments.length)return Array.from(this,Pe);var e=n?be:Ee,r=this._parents,i=this._groups;typeof t!="function"&&(t=$e(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],f=h.length,p=Re(t.call(c,c&&c.__data__,u,r)),d=p.length,g=s[u]=new Array(d),M=a[u]=new Array(d),v=l[u]=new Array(f);e(c,h,g,M,v,p,n);for(var A=0,x=0,w,N;A<d;++A)if(w=g[A]){for(A>=x&&(x=A+1);!(N=M[x])&&++x<d;);w._next=N||null}}return a=new I(a,r),a._enter=s,a._exit=l,a}function Re(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ce(){return new I(this._exit||this._groups.map(Mn),this._parents)}function Ie(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Ye(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=e[l],c=r[l],h=u.length,f=s[l]=new Array(h),p,d=0;d<h;++d)(p=u[d]||c[d])&&(f[d]=p);for(;l<i;++l)s[l]=e[l];return new I(s,this._parents)}function De(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Fe(t){t||(t=Ve);function n(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,l=i[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(n)}return new I(i,this._parents).order()}function Ve(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Be(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function He(){return Array.from(this)}function Ue(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function qe(){let t=0;for(const n of this)++t;return t}function Je(){return!this.node()}function Le(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Xe(t){return function(){this.removeAttribute(t)}}function ze(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ge(t,n){return function(){this.setAttribute(t,n)}}function Ke(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function We(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Ze(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Qe(t,n){var e=Ot(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?ze:Xe:typeof n=="function"?e.local?Ze:We:e.local?Ke:Ge)(e,n))}function On(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function je(t){return function(){this.style.removeProperty(t)}}function tr(t,n,e){return function(){this.style.setProperty(t,n,e)}}function nr(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function er(t,n,e){return arguments.length>1?this.each((n==null?je:typeof n=="function"?nr:tr)(t,n,e??"")):Q(this.node(),t)}function Q(t,n){return t.style.getPropertyValue(n)||On(t).getComputedStyle(t,null).getPropertyValue(n)}function rr(t){return function(){delete this[t]}}function ir(t,n){return function(){this[t]=n}}function or(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function ar(t,n){return arguments.length>1?this.each((n==null?rr:typeof n=="function"?or:ir)(t,n)):this.node()[t]}function Nn(t){return t.trim().split(/^|\s+/)}function qt(t){return t.classList||new Sn(t)}function Sn(t){this._node=t,this._names=Nn(t.getAttribute("class")||"")}Sn.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Tn(t,n){for(var e=qt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function $n(t,n){for(var e=qt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function sr(t){return function(){Tn(this,t)}}function ur(t){return function(){$n(this,t)}}function cr(t,n){return function(){(n.apply(this,arguments)?Tn:$n)(this,t)}}function lr(t,n){var e=Nn(t+"");if(arguments.length<2){for(var r=qt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?cr:n?sr:ur)(e,n))}function fr(){this.textContent=""}function hr(t){return function(){this.textContent=t}}function pr(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function dr(t){return arguments.length?this.each(t==null?fr:(typeof t=="function"?pr:hr)(t)):this.node().textContent}function gr(){this.innerHTML=""}function _r(t){return function(){this.innerHTML=t}}function vr(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function yr(t){return arguments.length?this.each(t==null?gr:(typeof t=="function"?vr:_r)(t)):this.node().innerHTML}function mr(){this.nextSibling&&this.parentNode.appendChild(this)}function wr(){return this.each(mr)}function Ar(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xr(){return this.each(Ar)}function Mr(t){var n=typeof t=="function"?t:mn(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Or(){return null}function Nr(t,n){var e=typeof t=="function"?t:mn(t),r=n==null?Or:typeof n=="function"?n:Ut(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Sr(){var t=this.parentNode;t&&t.removeChild(this)}function Tr(){return this.each(Sr)}function $r(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Er(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function br(t){return this.select(t?Er:$r)}function Pr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function kr(t){return function(n){t.call(this,n,this.__data__)}}function Rr(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Cr(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Ir(t,n,e){return function(){var r=this.__on,i,o=kr(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function Yr(t,n,e){var r=Rr(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=n?Ir:Cr,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function En(t,n,e){var r=On(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Dr(t,n){return function(){return En(this,t,n)}}function Fr(t,n){return function(){return En(this,t,n.apply(this,arguments))}}function Vr(t,n){return this.each((typeof n=="function"?Fr:Dr)(t,n))}function*Br(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var bn=[null];function I(t,n){this._groups=t,this._parents=n}function st(){return new I([[document.documentElement]],bn)}function Hr(){return this}I.prototype=st.prototype={constructor:I,select:pe,selectAll:ve,selectChild:Ae,selectChildren:Ne,filter:Se,data:ke,enter:Te,exit:Ce,join:Ie,merge:Ye,selection:Hr,order:De,sort:Fe,call:Be,nodes:He,node:Ue,size:qe,empty:Je,each:Le,attr:Qe,style:er,property:ar,classed:lr,text:dr,html:yr,raise:wr,lower:xr,append:Mr,insert:Nr,remove:Tr,clone:br,datum:Pr,on:Yr,dispatch:Vr,[Symbol.iterator]:Br};function Ur(t){return typeof t=="string"?new I([[document.querySelector(t)]],[document.documentElement]):new I([[t]],bn)}var j=0,et=0,nt=0,Pn=1e3,wt,rt,At=0,G=0,Nt=0,ot=typeof performance=="object"&&performance.now?performance:Date,kn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jt(){return G||(kn(qr),G=ot.now()+Nt)}function qr(){G=0}function xt(){this._call=this._time=this._next=null}xt.prototype=Rn.prototype={constructor:xt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Jt():+e)+(n==null?0:+n),!this._next&&rt!==this&&(rt?rt._next=this:wt=this,rt=this),this._call=t,this._time=e,Yt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yt())}};function Rn(t,n,e){var r=new xt;return r.restart(t,n,e),r}function Jr(){Jt(),++j;for(var t=wt,n;t;)(n=G-t._time)>=0&&t._call.call(void 0,n),t=t._next;--j}function rn(){G=(At=ot.now())+Nt,j=et=0;try{Jr()}finally{j=0,Xr(),G=0}}function Lr(){var t=ot.now(),n=t-At;n>Pn&&(Nt-=n,At=t)}function Xr(){for(var t,n=wt,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:wt=e);rt=t,Yt(r)}function Yt(t){if(!j){et&&(et=clearTimeout(et));var n=t-G;n>24?(t<1/0&&(et=setTimeout(rn,t-ot.now()-Nt)),nt&&(nt=clearInterval(nt))):(nt||(At=ot.now(),nt=setInterval(Lr,Pn)),j=1,kn(rn))}}function on(t,n,e){var r=new xt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var zr=yn("start","end","cancel","interrupt"),Gr=[],Cn=0,an=1,Dt=2,gt=3,sn=4,Ft=5,_t=6;function St(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Kr(t,e,{name:n,index:r,group:i,on:zr,tween:Gr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Cn})}function Lt(t,n){var e=Y(t,n);if(e.state>Cn)throw new Error("too late; already scheduled");return e}function F(t,n){var e=Y(t,n);if(e.state>gt)throw new Error("too late; already running");return e}function Y(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Kr(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Rn(o,0,e.time);function o(u){e.state=an,e.timer.restart(a,e.delay,e.time),e.delay<=u&&a(u-e.delay)}function a(u){var c,h,f,p;if(e.state!==an)return l();for(c in r)if(p=r[c],p.name===e.name){if(p.state===gt)return on(a);p.state===sn?(p.state=_t,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<n&&(p.state=_t,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(on(function(){e.state===gt&&(e.state=sn,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=Dt,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Dt){for(e.state=gt,i=new Array(f=e.tween.length),c=0,h=-1;c<f;++c)(p=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(i[++h]=p);i.length=h+1}}function s(u){for(var c=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(l),e.state=Ft,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);e.state===Ft&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=_t,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function Wr(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>Dt&&r.state<Ft,r.state=_t,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function Zr(t){return this.each(function(){Wr(this,t)})}function Qr(t,n){var e,r;return function(){var i=F(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function jr(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=F(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},l=0,u=i.length;l<u;++l)if(i[l].name===n){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function ti(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=Y(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?Qr:jr)(e,t,n))}function Xt(t,n,e){var r=t._id;return t.each(function(){var i=F(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return Y(i,r).value[n]}}function In(t,n){var e;return(typeof n=="number"?X:n instanceof Wt?Kt:(e=Wt(n))?(n=e,Kt):Xn)(t,n)}function ni(t){return function(){this.removeAttribute(t)}}function ei(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ri(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function ii(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function oi(t,n,e){var r,i,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s)))}}function ai(t,n,e){var r,i,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s)))}}function si(t,n){var e=Ot(t),r=e==="transform"?te:In;return this.attrTween(t,typeof n=="function"?(e.local?ai:oi)(e,r,Xt(this,"attr."+t,n)):n==null?(e.local?ei:ni)(e):(e.local?ii:ri)(e,r,n))}function ui(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ci(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function li(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ci(t,o)),e}return i._value=n,i}function fi(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ui(t,o)),e}return i._value=n,i}function hi(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Ot(t);return this.tween(e,(r.local?li:fi)(r,n))}function pi(t,n){return function(){Lt(this,t).delay=+n.apply(this,arguments)}}function di(t,n){return n=+n,function(){Lt(this,t).delay=n}}function gi(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?pi:di)(n,t)):Y(this.node(),n).delay}function _i(t,n){return function(){F(this,t).duration=+n.apply(this,arguments)}}function vi(t,n){return n=+n,function(){F(this,t).duration=n}}function yi(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?_i:vi)(n,t)):Y(this.node(),n).duration}function mi(t,n){if(typeof n!="function")throw new Error;return function(){F(this,t).ease=n}}function wi(t){var n=this._id;return arguments.length?this.each(mi(n,t)):Y(this.node(),n).ease}function Ai(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;F(this,t).ease=e}}function xi(t){if(typeof t!="function")throw new Error;return this.each(Ai(this._id,t))}function Mi(t){typeof t!="function"&&(t=An(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new U(r,this._parents,this._name,this._id)}function Oi(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=n[s],u=e[s],c=l.length,h=a[s]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(h[p]=f);for(;s<r;++s)a[s]=n[s];return new U(a,this._parents,this._name,this._id)}function Ni(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Si(t,n,e){var r,i,o=Ni(n)?Lt:F;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function Ti(t,n){var e=this._id;return arguments.length<2?Y(this.node(),e).on.on(t):this.each(Si(e,t,n))}function $i(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Ei(){return this.on("end.remove",$i(this._id))}function bi(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Ut(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),c,h,f=0;f<l;++f)(c=s[f])&&(h=t.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,St(u[f],n,e,f,u,Y(c,e)));return new U(o,this._parents,n,e)}function Pi(t){var n=this._name,e=this._id;typeof t!="function"&&(t=wn(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),p,d=Y(c,e),g=0,M=f.length;g<M;++g)(p=f[g])&&St(p,n,e,g,f,d);o.push(f),a.push(c)}return new U(o,a,n,e)}var ki=st.prototype.constructor;function Ri(){return new ki(this._groups,this._parents)}function Ci(t,n){var e,r,i;return function(){var o=Q(this,t),a=(this.style.removeProperty(t),Q(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Yn(t){return function(){this.style.removeProperty(t)}}function Ii(t,n,e){var r,i=e+"",o;return function(){var a=Q(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function Yi(t,n,e){var r,i,o;return function(){var a=Q(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Q(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s))}}function Di(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var l=F(this,t),u=l.on,c=l.value[o]==null?s||(s=Yn(n)):void 0;(u!==e||i!==c)&&(r=(e=u).copy()).on(a,i=c),l.on=r}}function Fi(t,n,e){var r=(t+="")=="transform"?jn:In;return n==null?this.styleTween(t,Ci(t,r)).on("end.style."+t,Yn(t)):typeof n=="function"?this.styleTween(t,Yi(t,r,Xt(this,"style."+t,n))).each(Di(this._id,t)):this.styleTween(t,Ii(t,r,n),e).on("end.style."+t,null)}function Vi(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Bi(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Vi(t,a,e)),r}return o._value=n,o}function Hi(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Bi(t,n,e??""))}function Ui(t){return function(){this.textContent=t}}function qi(t){return function(){var n=t(this);this.textContent=n??""}}function Ji(t){return this.tween("text",typeof t=="function"?qi(Xt(this,"text",t)):Ui(t==null?"":t+""))}function Li(t){return function(n){this.textContent=t.call(this,n)}}function Xi(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Li(i)),n}return r._value=t,r}function zi(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Xi(t))}function Gi(){for(var t=this._name,n=this._id,e=Dn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=Y(l,n);St(l,t,e,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new U(r,this._parents,t,e)}function Ki(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};e.each(function(){var u=F(this,r),c=u.on;c!==t&&(n=(t=c).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),u.on=n}),i===0&&o()})}var Wi=0;function U(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Dn(){return++Wi}var H=st.prototype;U.prototype={constructor:U,select:bi,selectAll:Pi,selectChild:H.selectChild,selectChildren:H.selectChildren,filter:Mi,merge:Oi,selection:Ri,transition:Gi,call:H.call,nodes:H.nodes,node:H.node,size:H.size,empty:H.empty,each:H.each,on:Ti,attr:si,attrTween:hi,style:Fi,styleTween:Hi,text:Ji,textTween:zi,remove:Ei,tween:ti,delay:gi,duration:yi,ease:wi,easeVarying:xi,end:Ki,[Symbol.iterator]:H[Symbol.iterator]};function Zi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qi={time:null,delay:0,duration:250,ease:Zi};function ji(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function to(t){var n,e;t instanceof U?(n=t._id,t=t._name):(n=Dn(),(e=Qi).time=Jt(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&St(l,t,n,u,a,e||ji(l,n));return new U(r,this._parents,t,n)}st.prototype.interrupt=Zr;st.prototype.transition=to;const Vt=Math.PI,Bt=2*Vt,z=1e-6,no=Bt-z;function Fn(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function eo(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Fn;const e=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class ro{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Fn:eo(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,o,a){this._append`C${+n},${+e},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(n,e,r,i,o){if(n=+n,e=+e,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-n,u=i-e,c=a-n,h=s-e,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(f>z)if(!(Math.abs(h*l-u*c)>z)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let p=r-a,d=i-s,g=l*l+u*u,M=p*p+d*d,v=Math.sqrt(g),A=Math.sqrt(f),x=o*Math.tan((Vt-Math.acos((g+f-M)/(2*v*A)))/2),w=x/A,N=x/v;Math.abs(w-1)>z&&this._append`L${n+w*c},${e+w*h}`,this._append`A${o},${o},0,0,${+(h*p>c*d)},${this._x1=n+N*l},${this._y1=e+N*u}`}}arc(n,e,r,i,o,a){if(n=+n,e=+e,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=n+s,c=e+l,h=1^a,f=a?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>z||Math.abs(this._y1-c)>z)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%Bt+Bt),f>no?this._append`A${r},${r},0,1,${h},${n-s},${e-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>z&&this._append`A${r},${r},0,${+(f>=Vt)},${h},${this._x1=n+r*Math.cos(o)},${this._y1=e+r*Math.sin(o)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function k(t){return function(){return t}}const un=Math.abs,P=Math.atan2,L=Math.cos,io=Math.max,Rt=Math.min,D=Math.sin,Z=Math.sqrt,C=1e-12,at=Math.PI,Mt=at/2,vt=2*at;function oo(t){return t>1?0:t<-1?at:Math.acos(t)}function cn(t){return t>=1?Mt:t<=-1?-Mt:Math.asin(t)}function ao(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new ro(n)}function so(t){return t.innerRadius}function uo(t){return t.outerRadius}function co(t){return t.startAngle}function lo(t){return t.endAngle}function fo(t){return t&&t.padAngle}function ho(t,n,e,r,i,o,a,s){var l=e-t,u=r-n,c=a-i,h=s-o,f=h*l-c*u;if(!(f*f<C))return f=(c*(n-o)-h*(t-i))/f,[t+f*l,n+f*u]}function pt(t,n,e,r,i,o,a){var s=t-e,l=n-r,u=(a?o:-o)/Z(s*s+l*l),c=u*l,h=-u*s,f=t+c,p=n+h,d=e+c,g=r+h,M=(f+d)/2,v=(p+g)/2,A=d-f,x=g-p,w=A*A+x*x,N=i-o,m=f*g-d*p,$=(x<0?-1:1)*Z(io(0,N*N*w-m*m)),R=(m*x-A*$)/w,T=(-m*A-x*$)/w,b=(m*x+A*$)/w,E=(-m*A+x*$)/w,O=R-M,_=T-v,y=b-M,V=E-v;return O*O+_*_>y*y+V*V&&(R=b,T=E),{cx:R,cy:T,x01:-c,y01:-h,x11:R*(i/N-1),y11:T*(i/N-1)}}function ln(){var t=so,n=uo,e=k(0),r=null,i=co,o=lo,a=fo,s=null,l=ao(u);function u(){var c,h,f=+t.apply(this,arguments),p=+n.apply(this,arguments),d=i.apply(this,arguments)-Mt,g=o.apply(this,arguments)-Mt,M=un(g-d),v=g>d;if(s||(s=c=l()),p<f&&(h=p,p=f,f=h),!(p>C))s.moveTo(0,0);else if(M>vt-C)s.moveTo(p*L(d),p*D(d)),s.arc(0,0,p,d,g,!v),f>C&&(s.moveTo(f*L(g),f*D(g)),s.arc(0,0,f,g,d,v));else{var A=d,x=g,w=d,N=g,m=M,$=M,R=a.apply(this,arguments)/2,T=R>C&&(r?+r.apply(this,arguments):Z(f*f+p*p)),b=Rt(un(p-f)/2,+e.apply(this,arguments)),E=b,O=b,_,y;if(T>C){var V=cn(T/f*D(R)),J=cn(T/p*D(R));(m-=V*2)>C?(V*=v?1:-1,w+=V,N-=V):(m=0,w=N=(d+g)/2),($-=J*2)>C?(J*=v?1:-1,A+=J,x-=J):($=0,A=x=(d+g)/2)}var K=p*L(A),W=p*D(A),ut=f*L(N),ct=f*D(N);if(b>C){var lt=p*L(x),ft=p*D(x),Tt=f*L(w),$t=f*D(w),B;if(M<at)if(B=ho(K,W,Tt,$t,lt,ft,ut,ct)){var Et=K-B[0],bt=W-B[1],Pt=lt-B[0],kt=ft-B[1],zt=1/D(oo((Et*Pt+bt*kt)/(Z(Et*Et+bt*bt)*Z(Pt*Pt+kt*kt)))/2),Gt=Z(B[0]*B[0]+B[1]*B[1]);E=Rt(b,(f-Gt)/(zt-1)),O=Rt(b,(p-Gt)/(zt+1))}else E=O=0}$>C?O>C?(_=pt(Tt,$t,K,W,p,O,v),y=pt(lt,ft,ut,ct,p,O,v),s.moveTo(_.cx+_.x01,_.cy+_.y01),O<b?s.arc(_.cx,_.cy,O,P(_.y01,_.x01),P(y.y01,y.x01),!v):(s.arc(_.cx,_.cy,O,P(_.y01,_.x01),P(_.y11,_.x11),!v),s.arc(0,0,p,P(_.cy+_.y11,_.cx+_.x11),P(y.cy+y.y11,y.cx+y.x11),!v),s.arc(y.cx,y.cy,O,P(y.y11,y.x11),P(y.y01,y.x01),!v))):(s.moveTo(K,W),s.arc(0,0,p,A,x,!v)):s.moveTo(K,W),!(f>C)||!(m>C)?s.lineTo(ut,ct):E>C?(_=pt(ut,ct,lt,ft,f,-E,v),y=pt(K,W,Tt,$t,f,-E,v),s.lineTo(_.cx+_.x01,_.cy+_.y01),E<b?s.arc(_.cx,_.cy,E,P(_.y01,_.x01),P(y.y01,y.x01),!v):(s.arc(_.cx,_.cy,E,P(_.y01,_.x01),P(_.y11,_.x11),!v),s.arc(0,0,f,P(_.cy+_.y11,_.cx+_.x11),P(y.cy+y.y11,y.cx+y.x11),v),s.arc(y.cx,y.cy,E,P(y.y11,y.x11),P(y.y01,y.x01),!v))):s.arc(0,0,f,N,w,v)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-at/2;return[L(h)*c,D(h)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:k(+c),u):t},u.outerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:k(+c),u):n},u.cornerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:k(+c),u):e},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:k(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:k(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:k(+c),u):o},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:k(+c),u):a},u.context=function(c){return arguments.length?(s=c??null,u):s},u}function po(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function go(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function _o(t){return t}function vo(){var t=_o,n=go,e=null,r=k(0),i=k(vt),o=k(0);function a(s){var l,u=(s=po(s)).length,c,h,f=0,p=new Array(u),d=new Array(u),g=+r.apply(this,arguments),M=Math.min(vt,Math.max(-vt,i.apply(this,arguments)-g)),v,A=Math.min(Math.abs(M)/u,o.apply(this,arguments)),x=A*(M<0?-1:1),w;for(l=0;l<u;++l)(w=d[p[l]=l]=+t(s[l],l,s))>0&&(f+=w);for(n!=null?p.sort(function(N,m){return n(d[N],d[m])}):e!=null&&p.sort(function(N,m){return e(s[N],s[m])}),l=0,h=f?(M-u*x)/f:0;l<u;++l,g=v)c=p[l],w=d[c],v=g+(w>0?w*h:0)+x,d[c]={data:s[c],index:l,value:w,startAngle:g,endAngle:v,padAngle:A};return d}return a.value=function(s){return arguments.length?(t=typeof s=="function"?s:k(+s),a):t},a.sortValues=function(s){return arguments.length?(n=s,e=null,a):n},a.sort=function(s){return arguments.length?(e=s,n=null,a):e},a.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:k(+s),a):r},a.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:k(+s),a):i},a.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:k(+s),a):o},a}function it(t,n,e){this.k=t,this.x=n,this.y=e}it.prototype={constructor:it,scale:function(t){return t===1?this:new it(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new it(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};it.prototype;const yo=({data:t,segmentField:n,ringField:e,valueField:r,title:i="Radial Heatmap",className:o="radial-heatmap",pieData:a=[]})=>{const s=q.useRef(null);return q.useEffect(()=>{if(!t||t.length===0)return;const l=Ur(s.current);l.selectAll("*").remove();const{width:u,height:c}=s.current.getBoundingClientRect(),h={top:40,right:120,bottom:40,left:40},f=Math.min(u,c)*.1,p=Math.min(u,c)/2-Math.max(...Object.values(h)),d=l.append("g").attr("transform",`translate(${u/2}, ${c/2})`),g=[...new Set(t.map(m=>m[n]))],M=[...new Set(t.map(m=>m[e]))].sort(),v=yt(t,m=>+m[r]);zn().domain([0,v]).range([0,2*Math.PI]);const A=pn().domain(M).range([f,p]),x=_n().domain([0,g.length-1]).interpolator(ae);let w=0;if(t.forEach(m=>{const $=m[n],R=m[e],T=+m[r]||0,b=A(R),E=b+A.bandwidth(),O=T/v*2*Math.PI,_=w,y=w+O;if(w=y,_===void 0||b===void 0)return;const V=ln().innerRadius(b).outerRadius(E).startAngle(_).endAngle(y),J=d.append("g");J.append("path").attr("d",V).attr("fill",x(g.indexOf($))).attr("stroke","#fff").attr("stroke-width",.5),J.append("title").text(`${$}: ${T}`)}),l.append("text").attr("x",u/2).attr("y",20).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","bold").text(i),a.length>0){const m=Math.min(u,c)*.2,$=l.append("g").attr("transform",`translate(${u/2}, ${c/2})`),R=vo().value(O=>O.value),T=ln().innerRadius(0).outerRadius(m),b=Ht(re),E=R(a);$.selectAll("path").data(E).enter().append("path").attr("d",T).attr("fill",(O,_)=>b(_)).attr("stroke","#fff").attr("stroke-width",1).append("title").text(O=>`${O.data.label}: ${O.data.value}`),$.selectAll("text").data(E).enter().append("text").attr("transform",O=>`translate(${T.centroid(O)})`).attr("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold").text(O=>O.data.label)}const N=l.append("g").attr("transform",`translate(${u/2+240}, ${c/2-150})`);g.forEach((m,$)=>{N.append("rect").attr("x",0).attr("y",$*26).attr("width",14).attr("height",14).attr("fill",x(g.indexOf(m))),N.append("text").attr("x",20).attr("y",$*26+12).attr("font-size","16px").text(()=>{const R=yt(t.filter(T=>T[n]===m),T=>T[r]);return`${m} — ${R}`})})},[t,n,e,r,i,a]),S.jsx("svg",{ref:s,className:o,style:{width:"100%",height:"100%"}})},mo=[{continent:"AFRICA","Total Occurrences":148,"Unique Sharks (with ID)":83,"Top 3 Publishing Countries":"United States > United Kingdom > Mexico","Avg Per Year (all)":6.17,"Avg Per Year (after 2020)":4.8,"Avg Per Year (2010 - 2020)":8.82,"Avg Per Year (2000 - 2010)":8.57,"Avg Per Year (before 2000)":1.5,Jan:28,Feb:3,Mar:5,Apr:8,May:4,Jun:3,Jul:10,Aug:5,Sep:5,Oct:19,Nov:12,Dec:17,HUMAN_OBSERVATION:105,MACHINE_OBSERVATION:0,"Oldest Occurrence":"1973-01","Newest Occurrence":"2025-02-28"},{continent:"ANTARCTICA","Total Occurrences":11,"Unique Sharks (with ID)":0,"Top 3 Publishing Countries":"Netherlands","Avg Per Year (all)":5.5,"Avg Per Year (after 2020)":0,"Avg Per Year (2010 - 2020)":5.5,"Avg Per Year (2000 - 2010)":0,"Avg Per Year (before 2000)":0,Jan:0,Feb:0,Mar:0,Apr:11,May:0,Jun:0,Jul:0,Aug:0,Sep:0,Oct:0,Nov:0,Dec:0,HUMAN_OBSERVATION:11,MACHINE_OBSERVATION:0,"Oldest Occurrence":"2017-04-16","Newest Occurrence":"2018-04-20"},{continent:"ASIA","Total Occurrences":380,"Unique Sharks (with ID)":181,"Top 3 Publishing Countries":"United States > United Kingdom > France","Avg Per Year (all)":9.5,"Avg Per Year (after 2020)":20.2,"Avg Per Year (2010 - 2020)":21.18,"Avg Per Year (2000 - 2010)":2.62,"Avg Per Year (before 2000)":1.82,Jan:26,Feb:32,Mar:38,Apr:26,May:30,Jun:33,Jul:58,Aug:30,Sep:19,Oct:25,Nov:24,Dec:18,HUMAN_OBSERVATION:277,MACHINE_OBSERVATION:3,"Oldest Occurrence":"1929","Newest Occurrence":"2025-03-31"},{continent:"EUROPE","Total Occurrences":2,"Unique Sharks (with ID)":1,"Top 3 Publishing Countries":"Portugal","Avg Per Year (all)":1,"Avg Per Year (after 2020)":0,"Avg Per Year (2010 - 2020)":1,"Avg Per Year (2000 - 2010)":1,"Avg Per Year (before 2000)":0,Jan:0,Feb:0,Mar:0,Apr:0,May:0,Jun:0,Jul:0,Aug:0,Sep:0,Oct:2,Nov:0,Dec:0,HUMAN_OBSERVATION:2,MACHINE_OBSERVATION:0,"Oldest Occurrence":"2008-10-18","Newest Occurrence":"2020-10-17"},{continent:"NORTH_AMERICA","Total Occurrences":385,"Unique Sharks (with ID)":341,"Top 3 Publishing Countries":"United States > Mexico > France","Avg Per Year (all)":13.46,"Avg Per Year (after 2020)":24.4,"Avg Per Year (2010 - 2020)":21.27,"Avg Per Year (2000 - 2010)":4.5,"Avg Per Year (before 2000)":1,Jan:33,Feb:24,Mar:37,Apr:23,May:16,Jun:22,Jul:43,Aug:40,Sep:30,Oct:25,Nov:34,Dec:31,HUMAN_OBSERVATION:341,MACHINE_OBSERVATION:38,"Oldest Occurrence":"1858","Newest Occurrence":"2025-01-07"},{continent:"OCEANIA","Total Occurrences":765,"Unique Sharks (with ID)":115,"Top 3 Publishing Countries":"Australia > United States > United Kingdom","Avg Per Year (all)":28.27,"Avg Per Year (after 2020)":7.8,"Avg Per Year (2010 - 2020)":61.73,"Avg Per Year (2000 - 2010)":4.29,"Avg Per Year (before 2000)":1.5,Jan:31,Feb:22,Mar:49,Apr:62,May:87,Jun:74,Jul:98,Aug:21,Sep:68,Oct:97,Nov:76,Dec:28,HUMAN_OBSERVATION:158,MACHINE_OBSERVATION:587,"Oldest Occurrence":"1964-04","Newest Occurrence":"2025-03-16"},{continent:"SOUTH_AMERICA","Total Occurrences":36,"Unique Sharks (with ID)":12,"Top 3 Publishing Countries":"Ecuador > France > United States","Avg Per Year (all)":1.89,"Avg Per Year (after 2020)":2,"Avg Per Year (2010 - 2020)":2.14,"Avg Per Year (2000 - 2010)":2.25,"Avg Per Year (before 2000)":1,Jan:1,Feb:0,Mar:3,Apr:5,May:2,Jun:4,Jul:1,Aug:4,Sep:4,Oct:5,Nov:1,Dec:2,HUMAN_OBSERVATION:25,MACHINE_OBSERVATION:6,"Oldest Occurrence":"1984-03-24","Newest Occurrence":"2024"}],Vn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wo=t=>{const n=[];return t.forEach(e=>{Vn.forEach(r=>{const i=e[r];i!=null&&!Number.isNaN(+i)&&n.push({continent:e.continent,month:r,"Total Occurrences":+i,"Avg Per Year (all)":+e["Avg Per Year (all)"],"Human Observation":+e.HUMAN_OBSERVATION||0,"Machine Observation":+e.MACHINE_OBSERVATION||0})})}),n},Ao=()=>{const t=q.useMemo(()=>wo(mo),[]),[n,e]=q.useState(""),r=q.useMemo(()=>[...new Set(t.map(u=>u.continent))].sort(),[t]),i=q.useMemo(()=>t.filter(u=>u.continent===n),[t,n]),o=u=>{const c=t.filter(d=>d.continent===u);if(!c.length)return[];const h=yt(c,d=>d["Human Observation"]),f=yt(c,d=>d["Machine Observation"]),p=h+f;return[{label:"Human Observation",value:h/p*100},{label:"Machine Observation",value:f/p*100}]},a=q.useMemo(()=>o(n),[n,t]),s=u=>t.filter(c=>c.continent===u).reduce((c,h)=>(Vn.forEach(f=>{c[f]=(c[f]||0)+(h[f]||0)}),c),{}),l=q.useMemo(()=>n?s(n):{},[n,t]);return S.jsxs("div",{className:"relative",style:{width:"800px",height:"600px",margin:"10px auto"},children:[S.jsx("label",{htmlFor:"continent-select",style:{display:"block",marginBottom:"1rem"},children:"Select a continent:"}),S.jsxs("select",{id:"continent-select",value:n,onChange:u=>e(u.target.value),style:{padding:"0.5rem",marginBottom:"2rem",minWidth:"200px"},children:[S.jsx("option",{value:"",children:"-- Choose a continent --"}),r.map(u=>S.jsx("option",{value:u,children:u},u))]}),i.length>0?S.jsx(S.Fragment,{children:S.jsx(yo,{data:i,segmentField:"month",ringField:"Avg Per Year (all)",valueField:"Total Occurrences",title:`Total Whale Shark Occurrences Per Month — ${n}`,monthOccurrences:l,pieData:a})}):S.jsx("p",{style:{textAlign:"center",marginTop:"2rem"},children:n?"No data available for this continent.":"Please select a continent to view data."})]})};function Oo(){return S.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",overflowY:"auto",textAlign:"center",padding:"20px"},children:[S.jsx("h1",{children:"DataVisuals Page"}),S.jsx("p",{children:"Here's where we'll incorporate d3.js visualizations."}),S.jsx(Ao,{}),S.jsx(tt,{to:"/home",style:{marginTop:"20px",fontSize:"18px",textDecoration:"underline",color:"blue"},children:"Go back to Home Page"}),S.jsx(tt,{to:"/globeviews",style:{marginTop:"20px",fontSize:"18px",textDecoration:"underline",color:"blue"},children:"Go to GlobeViews Page"}),S.jsx(tt,{to:"/sharktracker",style:{marginTop:"20px",fontSize:"18px",textDecoration:"underline",color:"blue"},children:"Go to SharkTracker Page"}),S.jsx(tt,{to:"/buildashark",style:{marginTop:"20px",fontSize:"18px",textDecoration:"underline",color:"blue"},children:"Go to BuildAShark Page"}),S.jsx(tt,{to:"/animation",style:{marginTop:"20px",fontSize:"18px",textDecoration:"underline",color:"blue"},children:"Go to Animation Page"})]})}export{Oo as default};
