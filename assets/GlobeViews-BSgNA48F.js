import{r as o,R as k,e as j,j as s,p as x,g as b,m as g}from"./index-Dwaau8Lr.js";import{g as N,c as p,a as S,G as C}from"./FavoriteButton-BGojTGTS.js";import{u as y,S as v,a as w}from"./GlobeClick-COSVkARK.js";import"./three.module-BTTigmqi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-C22u-Lz6.js";import"./ChartPlaceholder-BXLTEQe0.js";const A=new Set(["Africa","Antarctica","Asia","Europe","North America","Oceania","South America"]);function E({sharks:r,onSelect:m,selectedSharkId:f}){const[i,d]=o.useState({}),u=k.useMemo(()=>{const e={};return r.forEach(t=>{j(t.continent).forEach(n=>{A.has(n)&&(e[n]||(e[n]=[]),e[n].push(t))})}),console.log("Sharks by continent:",Object.keys(e).map(t=>`${t}: ${e[t].length}`).join(", ")),e},[r]),l=e=>{d(t=>({...t,[e]:!t[e]}))};return s.jsx("div",{className:"scrollable-sharks-list",children:Object.keys(u).length===0?s.jsx("div",{className:"no-sharks-message",children:"Sorry! No whale sharks match your current filters."}):Object.entries(u).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>{const c=i[e];return s.jsxs("div",{className:"continent-dropdown",children:[s.jsxs("div",{className:"continent-header",onClick:()=>l(e),children:[e," ",c?"▾":"▸"]}),c&&s.jsx("div",{className:"scrollable-shark-list",children:t.map(n=>s.jsx("div",{className:`shark-selector-item ${n.id===f?"selected":""}`,onClick:()=>m(n.id),children:(()=>{const a=x(n.countries.trim()),h=b(a);return s.jsxs(s.Fragment,{children:[h?s.jsxs("div",{className:"flag-and-code",children:[s.jsx("img",{src:`https://flagcdn.com/24x18/${h}.png`,alt:a,title:a,className:"flag-icon",loading:"lazy"}),s.jsx("span",{className:"country-code",children:h.toUpperCase()})]}):s.jsxs("span",{className:"flag-and-code",title:a,role:"img","aria-label":"unknown country",children:["🌍 ",s.jsx("span",{className:"country-code",children:"N/A"})]}),n.id]})})()},n.id))})]},e)})})}function F(){const[r,m]=o.useState(null),[f,i]=o.useState(!0),[d,u]=o.useState(g),l=o.useRef(),e=o.useMemo(()=>{const a=d.map(h=>h.id);return N(a)},[d]),t=g;o.useEffect(()=>{if(r){if(l.current){const a=l.current.getGlobe();p(a),l.current.highlightShark(r.id)}i(!1)}else{if(l.current){const a=l.current.getGlobe();p(a),S(a,e)}i(!0)}},[r,e]),o.useEffect(()=>{if(l.current){const a=l.current.getGlobe();p(a),S(a,e)}},[e]);const c=y({sharks:d,pointsData:e,allSharksVisible:!r,onSharkSelect:m}),n=()=>{m(null),i(!0)};return s.jsx("div",{className:"page-content globeviews-wrapper",children:s.jsxs("div",{className:"globe-views-container",children:[s.jsx("div",{className:"info-sidebar",children:s.jsx(v,{shark:r})}),s.jsx("div",{className:"globe-container",children:s.jsx(C,{ref:l,onSharkClick:c,allowClicks:!r})}),s.jsx("div",{className:"shark-selector",children:s.jsx(w,{sharks:t,onSelect:c,onReset:n,selectedSharkId:r?r.id:null,DisplayComponent:E,onFilteredSharksChange:u})})]})})}export{F as default};
