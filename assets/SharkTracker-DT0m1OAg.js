import{r as d,j as s}from"./index-CkKqsPlm.js";import{s as g,G as p}from"./DataUtils-Bc8lcOqW.js";import"./three.module-BY-9PNfi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-DpXFg4GH.js";import"./country-list-CMU6V2HV.js";const N=({shark:e,onPlayStory:i,isPlaying:a,playingSharkId:l})=>{const[r,c]=d.useState(!1),t=()=>{c(!r)};return s.jsxs("div",{className:`shark-card
            ${l===e.id&&a?" currentlyPlaying":""}
            ${a?" anyPlaying":""}
            ${r?" expanded":""}
        `,onClick:t,children:[s.jsx("div",{className:"shark-country-tags",children:Array.from(new Set(e.countries.split(",").map(n=>n.trim().split(" (")[0]))).map(n=>s.jsx("span",{className:"country-tag",children:n},n))}),s.jsx("div",{className:"shark-card-image",children:e.cartoonImageURL?s.jsx("img",{src:e.cartoonImageURL,alt:`LLM-generated cartoon image of whale shark named ${e.name}`}):s.jsx("span",{children:"Shark Image"})}),s.jsx("div",{className:"shark-card-content",children:s.jsx("button",{className:`
                    ${l===e.id&&a?" currentlyPlaying":""}
                    ${a?" anyPlaying":""}
                `,onClick:n=>{n.stopPropagation(),i(e.id)},disabled:a,children:a?"Story in Progress...":s.jsxs(s.Fragment,{children:["Play ",s.jsx("strong",{children:e.name}),"'s Story"]})})}),r&&s.jsxs("div",{className:"shark-card-details",children:[s.jsxs("h2",{className:"shark-id",children:["ID:  ",e.id]}),s.jsxs("div",{className:"shark-nicknames",children:[s.jsx("h3",{className:"shark-name",children:"LLM-generated nicknames"}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"OpenAI:"}),"  ",e.name]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Gemma:"}),"  ",e.gemmaName]})]}),s.jsxs("div",{className:"shark-traits",children:[s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Sex:"}),"  ",e.sex]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Life Stage:"}),"  ",e.lifeStage]})]}),s.jsxs("div",{className:"shark-records",children:[s.jsxs("h3",{className:"shark-details",children:[s.jsx("strong",{children:"Total Records:"}),"  ",e.occurrences]}),s.jsxs("p",{className:"shark-details",children:[e.oldest,"  ...  ",e.newest]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Satellite tracking:"}),"  ",Math.round(e.machine/(e.machine+e.human)*100),"%"]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Human sightings:"}),"  ",Math.round(e.human/(e.machine+e.human)*100),"%"]})]}),s.jsxs("div",{className:"shark-regions",children:[s.jsx("h3",{className:"shark-details",children:"Places Visited"}),s.jsx("ul",{className:"timeline-list",children:e.countries.split(",").map((n,o)=>s.jsx("li",{className:"timeline-item",children:n},o))})]})]})]})},j=({sharks:e,onPlayStory:i,isPlaying:a,playingSharkId:l})=>s.jsx("div",{className:"shark-grid",children:e.map(r=>s.jsx(N,{shark:r,onPlayStory:i,isPlaying:a,playingSharkId:l},r.id))});function P(){const[e,i]=d.useState(!1),[a,l]=d.useState(null),r=d.useRef(),c=g,t=Math.ceil(c.length/2),n=c.slice(0,t),o=c.slice(t),m=h=>{var x;i(!0),l(h),(x=r.current)==null||x.playStory(h).finally(()=>{i(!1),l(null)})};return s.jsx("div",{className:"page-content sharktracker-wrapper",children:s.jsxs("div",{className:"globe-cards-container",children:[s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:n,onPlayStory:m,isPlaying:e,playingSharkId:a})}),s.jsx("div",{className:"globe-container",children:s.jsx(p,{ref:r})}),s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:o,onPlayStory:m,isPlaying:e,playingSharkId:a})})]})})}export{P as default};
