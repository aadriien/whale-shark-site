import{r as c,j as s,i as N,t as y,s as S}from"./index-C72PlvvJ.js";import{G as f}from"./Globe-B0V-b_q-.js";import"./three.module-BY-9PNfi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-DpXFg4GH.js";const v=({shark:e,onPlayStory:r,isPlaying:n,playingSharkId:l})=>{const[t,o]=c.useState({}),[i,d]=c.useState(!1),m=()=>{d(!i)};return s.jsxs("div",{className:`shark-card
                ${l===e.id&&n?" currentlyPlaying":""}
                ${n?" anyPlaying":""}
                ${i?" expanded":""}
            `,onClick:m,children:[s.jsx("div",{className:"shark-country-tags",children:Array.from(new Set(e.countries.split(",").map(a=>a.trim().split(" (")[0]))).map(a=>s.jsx("span",{className:"country-tag",children:a},a))}),s.jsx("div",{className:"shark-card-image",children:e.cartoonImageURL?s.jsx("img",{src:e.cartoonImageURL,alt:`LLM-generated cartoon image of whale shark named ${e.name}`}):s.jsx("span",{children:"Shark Image"})}),s.jsx("div",{className:"shark-card-content",children:s.jsx("button",{className:`play-story-button
                        ${l===e.id&&n?" currentlyPlaying":""}
                        ${n?" anyPlaying":""}
                    `,onClick:a=>{a.stopPropagation(),r(e.id)},disabled:n,children:n?"Story in Progress...":s.jsxs(s.Fragment,{children:["Play ",s.jsx("strong",{children:e.name}),"'s Story"]})})}),i&&s.jsxs("div",{className:"shark-card-details",children:[s.jsxs("h2",{className:"shark-id",children:["ID:  ",e.id,s.jsx("button",{className:"favorite-button",onClick:a=>{a.stopPropagation(),y(e.id),o({})},children:N(e.id)?"★":"☆"})]}),s.jsxs("div",{className:"shark-nicknames",children:[s.jsx("h3",{className:"shark-name",children:"LLM-generated nicknames"}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"OpenAI:"}),"  ",e.name]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Gemma:"}),"  ",e.gemmaName]})]}),s.jsxs("div",{className:"shark-traits",children:[s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Sex:"}),"  ",e.sex]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Life Stage:"}),"  ",e.lifeStage]})]}),s.jsxs("div",{className:"shark-records",children:[s.jsxs("h3",{className:"shark-details",children:[s.jsx("strong",{children:"Total Records:"}),"  ",e.occurrences]}),s.jsxs("p",{className:"shark-details",children:[e.oldest,"  ...  ",e.newest]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Satellite tracking:"}),"  ",Math.round(e.machine/(e.machine+e.human)*100),"%"]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Human sightings:"}),"  ",Math.round(e.human/(e.machine+e.human)*100),"%"]})]}),s.jsxs("div",{className:"shark-regions",children:[s.jsx("h3",{className:"shark-details",children:"Places Visited"}),s.jsx("ul",{className:"timeline-list",children:e.countries.split(",").map((a,h)=>s.jsx("li",{className:"timeline-item",children:a},h))})]})]})]})},p=({sharks:e,onPlayStory:r,isPlaying:n,playingSharkId:l})=>s.jsx("div",{className:"shark-grid",children:e.map(t=>s.jsx(v,{shark:t,onPlayStory:r,isPlaying:n,playingSharkId:l},t.id))});function F(){const[e,r]=c.useState(!1),[n,l]=c.useState(null),[t,o]=c.useState(null),i=c.useRef(),d=S,m=Math.ceil(d.length/2),a=d.slice(0,m),h=d.slice(m),x=g=>{var j;r(!0),l(g),(j=i.current)==null||j.playStory(g,u=>{o(u)}).finally(()=>{r(!1),l(null),o(null)})};return s.jsx("div",{className:"page-content sharktracker-wrapper",children:s.jsxs("div",{className:"globe-cards-container",children:[s.jsx("div",{className:"side-column",children:s.jsx(p,{sharks:a,onPlayStory:x,isPlaying:e,playingSharkId:n})}),s.jsxs("div",{className:"globe-container",style:{position:"relative"},children:[s.jsx(f,{ref:i}),s.jsx("div",{style:{position:"absolute",bottom:10,width:"100%",textAlign:"center",color:"white",fontSize:"0.85rem",fontFamily:"sans-serif",padding:"2px 0",backgroundColor:"rgba(0, 0, 0, 0)",textShadow:"0 0 8px rgba(0, 255, 255, 0.9)",pointerEvents:"none",userSelect:"none"},children:t?s.jsxs(s.Fragment,{children:["Lat: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.lat.toFixed(3)}),","," ","Lng: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.lng.toFixed(3)})," —"," ","Date: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.date||"N/A"})]}):"Story playback info will appear here"})]}),s.jsx("div",{className:"side-column",children:s.jsx(p,{sharks:h,onPlayStory:x,isPlaying:e,playingSharkId:n})})]})})}export{F as default};
