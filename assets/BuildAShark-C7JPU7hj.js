import{j as e,r as u}from"./index-B_PhykM_.js";import{c as b}from"./country-list-CMU6V2HV.js";const y={width:960,height:720,private:"true",nologo:"true",safe:"true"},p="https://image.pollinations.ai/prompt";async function f(i,c={},l){const a=new URLSearchParams({...y,...c}),d=encodeURIComponent(i),r=`${p}/${d}?${a.toString()}`;console.log("Fetching image from:",r),l(e.jsx("div",{className:"spinner"}));try{const s=await fetch(r);if(!s.ok){const g=await s.text();throw new Error(`HTTP error! status: ${s.status}, message: ${g}`)}const n=await s.blob(),m=URL.createObjectURL(n);l(e.jsx("img",{src:m,alt:i,loading:"lazy"}))}catch(s){console.error("Error fetching image:",s),l(e.jsx("p",{children:"Error loading image.. try submitting again!"}))}}const j=b.getNames(),w=()=>{const[i,c]=u.useState(null),l=e.jsxs("p",{id:"default-text",children:["ðŸ‹ Build-A-Whale-Shark ðŸ¦ˆ",e.jsx("br",{}),e.jsx("em",{children:"your creation will appear here"})]}),[a,d]=u.useState({name:"",age:"",country:"",researcherPOV:""}),[r,s]=u.useState(!1);u.useEffect(()=>(window.onbeforeunload=function(){return null},()=>{window.onbeforeunload=null}),[]);const n=o=>{const{name:t,value:h}=o.target;d(x=>({...x,[t]:h}))},m=o=>{o.preventDefault(),s(!0);const t="Â ",h=`
            Whimsical cartoon of ${a.name}, a filter-feeding whale shark.${t}
            It's a gentle giant with a huge flat mouth and soft, speckled skin with white dots.${t}
            ${a.name} is a playful, fun, quirky, and curious whale shark.${t}
            ${a.name} is ${a.age} years old and lives in ${a.country}!${t}
            If a researcher described this whale shark, they would say '${a.researcherPOV}'.${t}
            Make the whimsical cartoon highly unique, expressive, and full of charm.${t}
            Add accessories based on how researchers describe ${a.name}'s personality!${t}
            And get *CREATIVE*! Make it zesty. Make it interesting. Add background detail.${t}
            Maybe even add details for ${a.name}'s country, ${a.country}!${t}
            Do *NOT* include any text or letters in the image.

        `;console.log("User form data:",a),console.log("Prompt sent to LLM:",h);const x=Math.floor(Math.random()*1e6);f(h,{seed:x},c)},g=()=>{d({name:"",age:"",country:"",researcherPOV:""}),s(!1),c(null)};return e.jsxs("div",{className:"shark-generator",children:[e.jsxs("form",{className:"shark-generator-form",onSubmit:m,children:[e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What's your name?",e.jsx("div",{className:"label-subtext",children:"Or your nickname?"})]}),e.jsx("input",{disabled:r,type:"text",name:"name",value:a.name,placeholder:"e.g. Sharky McSharkface",onChange:n})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["How old are you?",e.jsx("div",{className:"label-subtext",children:"(Don't worry, everyone's whale-come here!)"})]}),e.jsx("input",{disabled:r,type:"number",name:"age",value:a.age,placeholder:"e.g. 132",onChange:n})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What's your home country?",e.jsx("div",{className:"label-subtext",children:"Or, which country would you like to visit?"})]}),e.jsx("input",{disabled:r,type:"text",name:"country",list:"country-options",value:a.country,onChange:n,placeholder:"e.g. Australia"}),e.jsx("datalist",{id:"country-options",children:j.map(o=>e.jsx("option",{value:o},o))})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What would a researcher studying humans say about you?",e.jsx("div",{className:"label-subtext"})]}),e.jsx("input",{disabled:r,type:"text",name:"researcherPOV",value:a.researcherPOV,placeholder:"e.g. always wears a weird hat",onChange:n})]}),e.jsxs("div",{className:"button-container",children:[e.jsx("button",{type:"button",onClick:g,children:"Reset"}),e.jsx("button",{type:"submit",children:"Submit"})]})]}),e.jsx("div",{id:"generated-image-container",children:i||l})]})};function k(){return e.jsxs("div",{className:"page-content",children:[e.jsx("h1",{children:"BuildAShark Page"}),e.jsx(w,{})]})}export{k as default};
