import{r as i,j as s}from"./index-BgixkTYc.js";import{s as N,G as y}from"./DataUtils-Cr5nJr43.js";import"./three.module-BY-9PNfi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-DpXFg4GH.js";import"./country-list-CMU6V2HV.js";const S=({shark:e,onPlayStory:r,isPlaying:n,playingSharkId:l})=>{const[t,c]=i.useState(!1),d=()=>{c(!t)};return s.jsxs("div",{className:`shark-card
            ${l===e.id&&n?" currentlyPlaying":""}
            ${n?" anyPlaying":""}
            ${t?" expanded":""}
        `,onClick:d,children:[s.jsx("div",{className:"shark-country-tags",children:Array.from(new Set(e.countries.split(",").map(a=>a.trim().split(" (")[0]))).map(a=>s.jsx("span",{className:"country-tag",children:a},a))}),s.jsx("div",{className:"shark-card-image",children:e.cartoonImageURL?s.jsx("img",{src:e.cartoonImageURL,alt:`LLM-generated cartoon image of whale shark named ${e.name}`}):s.jsx("span",{children:"Shark Image"})}),s.jsx("div",{className:"shark-card-content",children:s.jsx("button",{className:`
                    ${l===e.id&&n?" currentlyPlaying":""}
                    ${n?" anyPlaying":""}
                `,onClick:a=>{a.stopPropagation(),r(e.id)},disabled:n,children:n?"Story in Progress...":s.jsxs(s.Fragment,{children:["Play ",s.jsx("strong",{children:e.name}),"'s Story"]})})}),t&&s.jsxs("div",{className:"shark-card-details",children:[s.jsxs("h2",{className:"shark-id",children:["ID:  ",e.id]}),s.jsxs("div",{className:"shark-nicknames",children:[s.jsx("h3",{className:"shark-name",children:"LLM-generated nicknames"}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"OpenAI:"}),"  ",e.name]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Gemma:"}),"  ",e.gemmaName]})]}),s.jsxs("div",{className:"shark-traits",children:[s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Sex:"}),"  ",e.sex]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Life Stage:"}),"  ",e.lifeStage]})]}),s.jsxs("div",{className:"shark-records",children:[s.jsxs("h3",{className:"shark-details",children:[s.jsx("strong",{children:"Total Records:"}),"  ",e.occurrences]}),s.jsxs("p",{className:"shark-details",children:[e.oldest,"  ...  ",e.newest]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Satellite tracking:"}),"  ",Math.round(e.machine/(e.machine+e.human)*100),"%"]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Human sightings:"}),"  ",Math.round(e.human/(e.machine+e.human)*100),"%"]})]}),s.jsxs("div",{className:"shark-regions",children:[s.jsx("h3",{className:"shark-details",children:"Places Visited"}),s.jsx("ul",{className:"timeline-list",children:e.countries.split(",").map((a,o)=>s.jsx("li",{className:"timeline-item",children:a},o))})]})]})]})},j=({sharks:e,onPlayStory:r,isPlaying:n,playingSharkId:l})=>s.jsx("div",{className:"shark-grid",children:e.map(t=>s.jsx(S,{shark:t,onPlayStory:r,isPlaying:n,playingSharkId:l},t.id))});function w(){const[e,r]=i.useState(!1),[n,l]=i.useState(null),[t,c]=i.useState(null),d=i.useRef(),a=N,o=Math.ceil(a.length/2),g=a.slice(0,o),p=a.slice(o),m=h=>{var x;r(!0),l(h),(x=d.current)==null||x.playStory(h,u=>{c(u)}).finally(()=>{r(!1),l(null),c(null)})};return s.jsx("div",{className:"page-content sharktracker-wrapper",children:s.jsxs("div",{className:"globe-cards-container",children:[s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:g,onPlayStory:m,isPlaying:e,playingSharkId:n})}),s.jsxs("div",{className:"globe-container",style:{position:"relative"},children:[s.jsx(y,{ref:d}),s.jsx("div",{style:{position:"absolute",bottom:10,width:"100%",textAlign:"center",color:"white",fontSize:"0.85rem",fontFamily:"sans-serif",padding:"2px 0",backgroundColor:"rgba(0, 0, 0, 0)",textShadow:"0 0 8px rgba(0, 255, 255, 0.9)",pointerEvents:"none",userSelect:"none"},children:t?s.jsxs(s.Fragment,{children:["Lat: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.lat.toFixed(3)}),","," ","Lng: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.lng.toFixed(3)})," —"," ","Date: ",s.jsx("span",{style:{fontWeight:"bold"},children:t.date||"N/A"})]}):"Story playback info will appear here"})]}),s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:p,onPlayStory:m,isPlaying:e,playingSharkId:n})})]})})}export{w as default};
