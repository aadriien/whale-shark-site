import{r as o,e as k,j as s,p as j,g as x,m as g}from"./index-_eeLRr-Q.js";import{g as b,c as p,a as S,G as N}from"./FavoriteButton-CRepfWGC.js";import{u as C,S as y,a as v}from"./GlobeClick-Dm3Wt6YH.js";import"./three.module-BTTigmqi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-C22u-Lz6.js";import"./ChartPlaceholder-BKzLtkh8.js";import"./FilterSharks-BIgq0YVg.js";const A=["Africa","Antarctica","Asia","Europe","North America","Oceania","South America"];function w({sharks:r,onSelect:m,selectedSharkId:f}){const[i,d]=o.useState({}),u=o.useMemo(()=>{const e={};return r.forEach(t=>{k(t.continent).forEach(n=>{A.includes(n)&&(e[n]||(e[n]=[]),e[n].push(t))})}),console.log("Sharks by continent:",Object.keys(e).map(t=>`${t}: ${e[t].length}`).join(", ")),e},[r]),l=e=>{d(t=>({...t,[e]:!t[e]}))};return s.jsx("div",{className:"scrollable-sharks-list",children:Object.keys(u).length===0?s.jsx("div",{className:"no-sharks-message",children:"Sorry! No whale sharks match your current filters."}):Object.entries(u).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>{const c=i[e];return s.jsxs("div",{className:"continent-dropdown",children:[s.jsxs("div",{className:"continent-header",onClick:()=>l(e),children:[e," ",c?"â–¾":"â–¸"]}),c&&s.jsx("div",{className:"scrollable-shark-list",children:t.map(n=>s.jsx("div",{className:`shark-selector-item ${n.id===f?"selected":""}`,onClick:()=>m(n.id),children:(()=>{const a=j(n.countries.trim()),h=x(a);return s.jsxs(s.Fragment,{children:[h?s.jsxs("div",{className:"flag-and-code",children:[s.jsx("img",{src:`https://flagcdn.com/24x18/${h}.png`,alt:a,title:a,className:"flag-icon",loading:"lazy"}),s.jsx("span",{className:"country-code",children:h.toUpperCase()})]}):s.jsxs("span",{className:"flag-and-code",title:a,role:"img","aria-label":"unknown country",children:["ðŸŒ ",s.jsx("span",{className:"country-code",children:"N/A"})]}),n.id]})})()},n.id))})]},e)})})}function F(){const[r,m]=o.useState(null),[f,i]=o.useState(!0),[d,u]=o.useState(g),l=o.useRef(),e=o.useMemo(()=>{const a=d.map(h=>h.id);return b(a)},[d]),t=g;o.useEffect(()=>{if(r){if(l.current){const a=l.current.getGlobe();p(a),l.current.highlightShark(r.id)}i(!1)}else{if(l.current){const a=l.current.getGlobe();p(a),S(a,e)}i(!0)}},[r,e]),o.useEffect(()=>{if(l.current){const a=l.current.getGlobe();p(a),S(a,e)}},[e]);const c=C({sharks:d,pointsData:e,allSharksVisible:!r,onSharkSelect:m}),n=()=>{m(null),i(!0)};return s.jsx("div",{className:"page-content globeviews-wrapper",children:s.jsxs("div",{className:"globe-views-container",children:[s.jsx("div",{className:"info-sidebar",children:s.jsx(y,{shark:r})}),s.jsx("div",{className:"globe-container",children:s.jsx(N,{ref:l,onSharkClick:c,allowClicks:!r})}),s.jsx("div",{className:"shark-selector",children:s.jsx(v,{sharks:t,onSelect:c,onReset:n,selectedSharkId:r?r.id:null,DisplayComponent:w,onFilteredSharksChange:u})})]})})}export{F as default};
