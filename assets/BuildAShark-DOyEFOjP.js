import{j as e,r as h,w as j}from"./index-_eeLRr-Q.js";const w="pk_3CeY87uCNBsjk3FZ",k={model:"flux",width:"960",height:"720",safe:"true"},v="https://gen.pollinations.ai/image";async function $({imagePrompt:a,params:s={},setImageContent:n}){const t=new URLSearchParams({...k,...s}),u=encodeURIComponent(a),i=`${v}/${u}?${t.toString()}`;console.log("Fetching image from:",i),n(e.jsx("div",{className:"spinner"}));try{const o=await fetch(i,{headers:{Authorization:`Bearer ${w}`}});if(!o.ok){const g=await o.text();throw new Error(`HTTP error! status: ${o.status}, message: ${g}`)}const l=await o.blob(),m=URL.createObjectURL(l);n(e.jsx("img",{src:m,alt:a,loading:"lazy"}))}catch(o){console.error("Error fetching image:",o),n(e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("img",{src:"build-shark-error.png",alt:"Build-A-Shark error fallback with messy whale shark",loading:"lazy",style:{marginBottom:"0.7rem"}}),e.jsx("p",{children:"Oops, it looks like something went wrong... try submitting again!"})]}))}}const y=j.getNames(),N={name:50,age:3,country:80,researcherPOV:150},P=a=>{const s=document.createElement("div");return s.textContent=a,s.textContent||""},S=a=>{if(a.age.trim()){const n=Number(a.age);if(isNaN(n)||n<=0||n>200)return!1}if(a.country.trim()&&!y.includes(a.country.trim()))return!1;const s=/^[\p{L}0-9 .,!?'\-()]*$/u;return!(a.name.trim()&&!s.test(a.name.trim())||a.researcherPOV.trim()&&!s.test(a.researcherPOV.trim()))},A=()=>{const[a,s]=h.useState(null),n=e.jsxs("p",{id:"default-text",children:["ðŸ‹ Build-A-Whale-Shark ðŸ¦ˆ",e.jsx("br",{}),e.jsx("em",{children:"your creation will appear here"})]}),[t,u]=h.useState({name:"",age:"",country:"",researcherPOV:""}),[i,o]=h.useState(!1);h.useEffect(()=>(window.onbeforeunload=function(){return null},()=>{window.onbeforeunload=null}),[]);const l=c=>{const{name:r,value:d}=c.target,x=P(d),f=N[r]||100,p=x.slice(0,f);u(b=>({...b,[r]:p}))},m=c=>{if(c.preventDefault(),o(!0),!S(t)){alert("Please enter valid information.");return}const r="Â ",d=`
            Whimsical cartoon of ${t.name}, a filter-feeding whale shark.${r}
            It's a gentle giant with a huge flat mouth and soft, speckled skin with white dots.${r}
            ${t.name} is a playful, fun, quirky, and curious whale shark.${r}
            ${t.name} is ${t.age} years old and lives in ${t.country}!${r}
            If a researcher described this whale shark, they would say '${t.researcherPOV}'.${r}
            Make the whimsical cartoon highly unique, expressive, and full of charm.${r}
            Add accessories based on how researchers describe ${t.name}'s personality!${r}
            And get *CREATIVE*! Make it zesty. Make it interesting. Add background detail.${r}
            Maybe even add details for ${t.name}'s country, ${t.country}!${r}
            Do *NOT* include any text or letters in the image.

        `;console.log("User form data:",t),console.log("Prompt sent to LLM:",d);const x=Math.floor(Math.random()*1e6);$({imagePrompt:d,params:{seed:x},setImageContent:s})},g=()=>{u({name:"",age:"",country:"",researcherPOV:""}),o(!1),s(null)};return e.jsxs("div",{className:"shark-generator",children:[e.jsxs("form",{className:"shark-generator-form",onSubmit:m,children:[e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What's your name?",e.jsx("div",{className:"label-subtext",children:"Or your nickname?"})]}),e.jsx("input",{disabled:i,type:"text",name:"name",value:t.name,placeholder:"e.g. Sharky McSharkface",onChange:l})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["How old are you?",e.jsx("div",{className:"label-subtext",children:"(Don't worry, everyone's whale-come here!)"})]}),e.jsx("input",{disabled:i,type:"number",name:"age",value:t.age,placeholder:"e.g. 132",onChange:l})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What's your home country?",e.jsx("div",{className:"label-subtext",children:"Or, which country would you like to visit?"})]}),e.jsx("input",{disabled:i,type:"text",name:"country",list:"country-options",value:t.country,onChange:l,placeholder:"e.g. Australia"}),e.jsx("datalist",{id:"country-options",children:y.map(c=>e.jsx("option",{value:c},c))})]}),e.jsxs("label",{children:[e.jsxs("div",{className:"label-text",children:["What would a researcher studying humans say about you?",e.jsx("div",{className:"label-subtext"})]}),e.jsx("input",{disabled:i,type:"text",name:"researcherPOV",value:t.researcherPOV,placeholder:"e.g. always wears a weird hat",onChange:l})]}),e.jsxs("div",{className:"button-container",children:[e.jsx("button",{type:"button",onClick:g,children:"Reset"}),e.jsx("button",{type:"submit",children:"Submit"})]})]}),e.jsx("div",{id:"generated-image-container",children:a||n})]})};function C(){return e.jsxs("div",{className:"page-content buildashark-wrapper",children:[e.jsx("h1",{children:"Build-A-Shark"}),e.jsx(A,{})]})}export{C as default};
