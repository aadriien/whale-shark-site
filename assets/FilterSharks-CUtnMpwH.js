import{p as r,h as u,n as m}from"./index-CcfvE4tn.js";function p(o,e){return Array.from(new Set(o.flatMap(n=>{const a=n[e];return(a==null?void 0:a.split(",").map(t=>r(t).trim()).filter(Boolean))??[]}))).sort((n,a)=>n.localeCompare(a))}function f(o,e){return o.filter(n=>{var a;if(e.showOnlyWithMedia&&!(n.image&&n.image.trim()!==""&&n.image!=="Unknown")||e.country&&!(n.countries||"").split(",").map(i=>r(i).toLowerCase().trim()).some(i=>i.includes(e.country.toLowerCase()))||e.publishingCountry&&!(n.publishing||"").split(",").map(i=>r(i).toLowerCase().trim()).some(i=>i.includes(e.publishingCountry.toLowerCase())))return!1;if(e.yearRange){const t=parseInt(n.oldest),s=parseInt(n.newest),i=parseInt(e.yearRange[0]),c=parseInt(e.yearRange[1]);if(isNaN(t)||isNaN(s)||s<i||t>c)return!1}if(e.month&&!n.months.some(s=>s.includes(e.month))||e.hasOccurrenceNotes&&u(n.remarks)==="None"||e.minRecords>0&&n.occurrences<e.minRecords||e.sex&&(((a=n.sex)==null?void 0:a.toLowerCase())||"")!==e.sex.toLowerCase()||e.lifeStage&&m(n).toLowerCase()!==e.lifeStage.toLowerCase())return!1;if(e.observationType){let t=!0;if(e.observationType=="Satellite"?t=n.machine>0:e.observationType=="Human"&&(t=n.human>0),!t)return!1}return!0})}function d(o,e){return f(o,e).filter(a=>{if(e.miewidDistanceRange){const t=a.miewid_match_distance;if(!t||isNaN(t))return!1;const[s,i]=e.miewidDistanceRange;if(t<s||t>i)return!1}if(e.showOnlyConfidentMatches){const t=a.miewid_match_distance;if(!t||isNaN(t)||t>=1)return!1}if(e.plausibility&&a.plausibility!==e.plausibility)return!1;if(e.hasMatchedImages){const t=a.matched_shark_id;if(t&&!o.some(i=>i.id===t))return!1}return!0})}export{d as a,p as e,f};
