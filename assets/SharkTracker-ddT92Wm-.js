import{r as i,j as s,s as N}from"./index-CszvLcAE.js";import{F as y,G as S}from"./FavoriteButton-SD0rYglH.js";import{P as f}from"./PlayStoryButton-DXrDM9Qu.js";import"./three.module-BTTigmqi.js";import"./linear-BcwBMSNj.js";import"./OrbitControls-C22u-Lz6.js";const k=({shark:e,onPlayStory:r,isPlaying:t,playingSharkId:l})=>{const[a,c]=i.useState(!1),d=()=>{c(!a)};return s.jsxs("div",{className:`shark-card
                ${l===e.id&&t?" currentlyPlaying":""}
                ${t?" anyPlaying":""}
                ${a?" expanded":""}
            `,onClick:d,children:[s.jsx("div",{className:"shark-country-tags",children:Array.from(new Set(e.countries.split(",").map(n=>n.trim().split(" (")[0]))).map(n=>s.jsx("span",{className:"country-tag",children:n},n))}),s.jsx("div",{className:"shark-card-image",children:e.cartoonImageURL?s.jsx("img",{src:e.cartoonImageURL,alt:`LLM-generated cartoon image of whale shark named ${e.name}`}):s.jsx("span",{children:"Shark Image"})}),s.jsx("div",{className:"shark-card-content",children:s.jsx(f,{shark:e,onPlayStory:r,isPlaying:t,playingSharkId:l})}),a&&s.jsxs("div",{className:"shark-card-details",children:[s.jsxs("h2",{className:"shark-id",children:["ID:  ",e.id,s.jsx(y,{sharkId:e.id})]}),s.jsxs("div",{className:"shark-nicknames",children:[s.jsx("h3",{className:"shark-name",children:"LLM-generated nicknames"}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"OpenAI:"}),"  ",e.name]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Gemma:"}),"  ",e.gemmaName]})]}),s.jsxs("div",{className:"shark-traits",children:[s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Sex:"}),"  ",e.sex]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Life Stage:"}),"  ",e.lifeStage]})]}),s.jsxs("div",{className:"shark-records",children:[s.jsxs("h3",{className:"shark-details",children:[s.jsx("strong",{children:"Total Records:"}),"  ",e.occurrences]}),s.jsxs("p",{className:"shark-details",children:[e.oldest,"  ...  ",e.newest]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Satellite tracking:"}),"  ",Math.round(e.machine/(e.machine+e.human)*100),"%"]}),s.jsxs("p",{className:"shark-details",children:[s.jsx("strong",{children:"Human sightings:"}),"  ",Math.round(e.human/(e.machine+e.human)*100),"%"]})]}),s.jsxs("div",{className:"shark-regions",children:[s.jsx("h3",{className:"shark-details",children:"Places Visited"}),s.jsx("ul",{className:"timeline-list",children:e.countries.split(",").map((n,o)=>s.jsx("li",{className:"timeline-item",children:n},o))})]})]})]})},j=({sharks:e,onPlayStory:r,isPlaying:t,playingSharkId:l})=>s.jsx("div",{className:"shark-grid",children:e.map(a=>s.jsx(k,{shark:a,onPlayStory:r,isPlaying:t,playingSharkId:l},a.id))});function E(){const[e,r]=i.useState(!1),[t,l]=i.useState(null),[a,c]=i.useState(null),d=i.useRef(),n=N,o=Math.ceil(n.length/2),g=n.slice(0,o),p=n.slice(o),h=m=>{var x;r(!0),l(m),(x=d.current)==null||x.playStory(m,u=>{c(u)}).finally(()=>{r(!1),l(null),c(null)})};return s.jsx("div",{className:"page-content sharktracker-wrapper",children:s.jsxs("div",{className:"globe-cards-container",children:[s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:g,onPlayStory:h,isPlaying:e,playingSharkId:t})}),s.jsxs("div",{className:"globe-container",style:{position:"relative"},children:[s.jsx(S,{ref:d}),s.jsx("div",{style:{position:"absolute",bottom:10,width:"100%",textAlign:"center",color:"white",fontSize:"0.85rem",fontFamily:"sans-serif",padding:"2px 0",backgroundColor:"rgba(0, 0, 0, 0)",textShadow:"0 0 8px rgba(0, 255, 255, 0.9)",pointerEvents:"none",userSelect:"none"},children:a?s.jsxs(s.Fragment,{children:["Lat: ",s.jsx("span",{style:{fontWeight:"bold"},children:a.lat.toFixed(3)}),","," ","Lng: ",s.jsx("span",{style:{fontWeight:"bold"},children:a.lng.toFixed(3)})," —"," ","Date: ",s.jsx("span",{style:{fontWeight:"bold"},children:a.date||"N/A"})]}):"Story playback info will appear here"})]}),s.jsx("div",{className:"side-column",children:s.jsx(j,{sharks:p,onPlayStory:h,isPlaying:e,playingSharkId:t})})]})})}export{E as default};
